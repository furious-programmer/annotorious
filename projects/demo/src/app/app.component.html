<div class="controls">
  <div class="toolbar">
    <button 
      *ngFor="let tool of tools"
      (click)="setTool(tool)" 
      [class.active]="currentTool === tool">
      {{ tool | titlecase }}
    </button>
  </div>
  
  <!-- Debug element -->
  <div class="debug-info">Selected ID: {{selectedAnnotationId}}</div>

  <div class="label-controls" [style.display]="selectedAnnotationId ? 'flex' : 'none'">
    <div class="input-group">
      <input 
        #labelInput
        type="text" 
        [value]="currentLabel"
        (input)="onLabelChange(labelInput.value)"
        placeholder="Enter label text">
      <button (click)="setLabel()">Set Label</button>
      <button (click)="removeSelectedLabel()" class="remove-btn">Remove Label</button>
    </div>
    <div class="input-group">
      <input 
        #colorInput
        type="color" 
        [value]="currentColor"
        (input)="onColorChange(colorInput.value)">
      <button (click)="setColor()">Set Color</button>
    </div>
    <div class="input-group">
      <input 
        #strokeWidthInput
        type="number"
        [value]="currentStrokeWidth"
        (input)="onStrokeWidthChange(strokeWidthInput.valueAsNumber)"
        min="1"
        max="20"
        step="1">
      <button (click)="setStrokeWidth()">Set Stroke Width</button>
    </div>
  </div>
</div>

<lib-annotorious-openseadragon
  [imageSource]="dziUrl"
  [theme]="theme"
  [defaultTool]="'polygon'"
  [showToolbar]="true"
  (annotatorReady)="onAnnotatorReady($event)"
  (annotationCreated)="onAnnotationCreated($event)"
  (annotationUpdated)="onAnnotationUpdated($event)"
  (annotationDeleted)="onAnnotationDeleted($event)"
  (annotationSelected)="onAnnotationSelected($event)"
  (annotationDeselected)="onAnnotationDeselected($event)"
  (editingStarted)="onEditingStarted($event)"
  (editingStopped)="onEditingStopped($event)"
  (shapeMoved)="onShapeMoved($event)"
  (shapeResized)="onShapeResized($event)"
  (labelSelected)="onLabelSelected($event)"
  (contextMenuClicked)="onContextMenuClicked($event)">
</lib-annotorious-openseadragon>